data = pd.read_csv("lung.csv", "lung.csv")
data.head(, )
data.info(, )
data.describe(, )
kmf = KaplanMeierFitter(, ) 
data.loc[data.status == 1, 'dead', data.status == 1] = 0
data.loc[data.status == 2, 'dead', data.status == 2] = 1
data.head(, )
kmf.fit(durations =  data["time"], event_observed = data["dead"], durations =  data["time"])
event_at_0 = kmf.event_table.iloc[0,:, 0]
surv_for_0 = (event_at_0.at_risk - event_at_0.observed, event_at_0.at_risk - event_at_0.observed)/event_at_0.at_risk
event_at_5 = kmf.event_table.iloc[1,:, 1]
surv_for_5 = (event_at_5.at_risk - event_at_5.observed, event_at_5.at_risk - event_at_5.observed)/event_at_5.at_risk
event_at_11 = kmf.event_table.iloc[2,:, 2]
surv_for_11 = (event_at_11.at_risk - event_at_11.observed, event_at_11.at_risk - event_at_11.observed)/event_at_11.at_risk
kmf.predict([0,5,11,12], [0)
kmf.plot(, )
plt.title("The Kaplan-Meier Estimate", "The Kaplan-Meier Estimate")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Probability of survival", "Probability of survival")
plt.plot(confidence_surv_func["KM_estimate_lower_0.95"],label="Lower", confidence_surv_func["KM_estimate_lower_0.95"])
plt.plot(confidence_surv_func["KM_estimate_upper_0.95"],label="Upper", confidence_surv_func["KM_estimate_upper_0.95"])
plt.title("Survival Function With Confidence Interval", "Survival Function With Confidence Interval")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Survival Probability", "Survival Probability")
plt.legend(, )
kmf.plot_cumulative_density(, )
plt.title("Cumulative Density Plot", "Cumulative Density Plot")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Probability of person's death", "Probability of person's death")
plt.plot(kmf.confidence_interval_cumulative_density_["KM_estimate_lower_0.95"],label="Lower", kmf.confidence_interval_cumulative_density_["KM_estimate_lower_0.95"])
plt.plot(kmf.confidence_interval_cumulative_density_["KM_estimate_upper_0.95"],label="Upper", kmf.confidence_interval_cumulative_density_["KM_estimate_upper_0.95"])
plt.title("Cumulative Density With Confidence Interval", "Cumulative Density With Confidence Interval")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Cumulative Density", "Cumulative Density")
plt.legend(, )
kmf.cumulative_density_at_times(times=1022, times=1022)
plt.plot(median_time_to_event,label="Median Time left", median_time_to_event)
plt.title("Medain time to event", "Medain time to event")
plt.xlabel("Total days", "Total days")
plt.ylabel("Conditional median time to event", "Conditional median time to event")
plt.legend(, )
naf = NelsonAalenFitter(, )
naf.fit(data["time"], event_observed=data["dead"], data["time"])
naf.plot_cumulative_hazard(, )
plt.title("Cumulative Probability for Event of Interest", "Cumulative Probability for Event of Interest")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Cumulative Probability of person's death", "Cumulative Probability of person's death")
plt.plot(confidence_interval["NA_estimate_lower_0.95"],label="Lower", confidence_interval["NA_estimate_lower_0.95"])
plt.plot(confidence_interval["NA_estimate_upper_0.95"],label="Upper", confidence_interval["NA_estimate_upper_0.95"])
plt.title("Cumulative hazard With Confidence Interval", "Cumulative hazard With Confidence Interval")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Cumulative hazard", "Cumulative hazard")
plt.legend(, )
kmf.plot_cumulative_density(label="Cumulative Hazard", label="Cumulative Hazard")
naf.plot_cumulative_hazard(label="Cumulative Density", label="Cumulative Density")
plt.xlabel("Number of Days", "Number of Days")
