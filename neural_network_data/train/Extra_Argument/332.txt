data = pd.read_csv("lung.csv", "lung.csv")
data.head(, )
data.loc[data.status == 1, 'dead', data.status == 1] = 0
data.loc[data.status == 2, 'dead', data.status == 2] = 1
data.head(, )
kmf_m = KaplanMeierFitter(, ) 
kmf_f = KaplanMeierFitter(, ) 
Male = data.query("sex == 1", "sex == 1")
Female = data.query("sex == 2", "sex == 2")
Male.head(, )
Female.head(, )
kmf_m.fit(durations =  Male["time"],event_observed = Male["dead"] ,label="Male", durations =  Male["time"])
kmf_f.fit(durations =  Female["time"],event_observed = Female["dead"], label="Female", durations =  Female["time"])
kmf_m.predict(11, 11)
kmf_f.predict(11, 11)
kmf_m.plot(, )
kmf_f.plot(, )
plt.xlabel("Days Passed", "Days Passed")
plt.ylabel("Survival Probability", "Survival Probability")
plt.title("KMF", "KMF")
kmf_m.plot_cumulative_density(, )
kmf_f.plot_cumulative_density(, )
plt.title("Cumulative Density", "Cumulative Density")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Probability", "Probability")
naf_m = NelsonAalenFitter(, )
naf_f = NelsonAalenFitter(, )
naf_m.fit(Male["time"],event_observed = Male["dead"], Male["time"])
naf_f.fit(Female["time"],event_observed = Female["dead"], Female["time"])
naf_m.plot_cumulative_hazard(label="Male", label="Male")
naf_f.plot_cumulative_hazard(label="Female", label="Female")
plt.title("Cumulative Hazard Plot", "Cumulative Hazard Plot")
plt.xlabel("Number of Days", "Number of Days")
plt.ylabel("Cumulative Hazard", "Cumulative Hazard")
plt.plot(median_time_to_event,label="Median Time left", median_time_to_event)
plt.title("Medain time to event", "Medain time to event")
plt.xlabel("Total days", "Total days")
plt.ylabel("Conditional median time to event", "Conditional median time to event")
plt.legend(, )
plt.plot(median_time_to_event,label="Median Time left", median_time_to_event)
plt.title("Medain time to event", "Medain time to event")
plt.xlabel("Total days", "Total days")
plt.ylabel("Conditional median time to event", "Conditional median time to event")
plt.legend(, )
plt.plot(confidence_surv_func["Male_lower_0.95"],label="Lower", confidence_surv_func["Male_lower_0.95"])
plt.plot(confidence_surv_func["Male_upper_0.95"],label="Upper", confidence_surv_func["Male_upper_0.95"])
plt.title("Survival Function With Confidence Interval", "Survival Function With Confidence Interval")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Survival Probability", "Survival Probability")
plt.legend(, )
plt.plot(confidence_surv_func["Female_lower_0.95"],label="Lower", confidence_surv_func["Female_lower_0.95"])
plt.plot(confidence_surv_func["Female_upper_0.95"],label="Upper", confidence_surv_func["Female_upper_0.95"])
plt.title("Survival Function With Confidence Interval", "Survival Function With Confidence Interval")
plt.xlabel("Number of days", "Number of days")
plt.ylabel("Survival Probability", "Survival Probability")
plt.legend(, )
kmf_m.plot_cumulative_density(label="Male Density", label="Male Density")
naf_m.plot_cumulative_hazard(label="Male Hazard", label="Male Hazard")
plt.xlabel("Number of Days", "Number of Days")
kmf_f.plot_cumulative_density(label="Female Density", label="Female Density")
naf_f.plot_cumulative_hazard(label="Female Hazard", label="Female Hazard")
plt.xlabel("Number of Days", "Number of Days")
Time_A = Male['time', 'time']
Event_A = Male['dead', 'dead']
Time_B = Female['time', 'time']
Event_B = Female['dead', 'dead']
results = logrank_test(Time_A, Time_B, event_observed_A=Event_A, event_observed_B=Event_B, Time_A)
